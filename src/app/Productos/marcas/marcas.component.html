<!-- Navegación superior -->
<nav class="bg-white shadow flex justify-between items-center p-4">
  <div class="flex items-center">
      <img src="/img/icon.png" alt="logo" class="h-8 mr-2">
      <h1 class="text-xl font-bold text-red-500">Productos</h1>
  </div>
  <h2 class="text-xl font-bold text-red-500">Marcas</h2>
  <h2 class="text-xl font-bold text-red-500">Supermercado "LABRYC" CIA LTDA</h2>
  <div class="flex items-center space-x-4">
      <span class="text-red-500 cursor-pointer">🔔</span>
      <span id="menu-toggle" class="text-red-500 cursor-pointer">🔳</span>
      <span class="text-red-500 cursor-pointer">🏠</span>
      <span class="text-red-500 cursor-pointer">ℹ️</span>
      <img src="/img/user.png" alt="Usuario" class="h-8 w-8 rounded-full">
  </div>
</nav>

<!-- Contenedor principal con ambos menús y contenido -->
<div class="billing-admin-container">
  <!-- Menú de Administración (Colapsable) -->
  <aside class="admin-menu" [class.collapsed]="isAdminMenuCollapsed">
      <ul class="menu">
          <li class="menu-item admin" (click)="navigateTo('administracion')">⚙️ <span>Administración</span></li>
          <li class="menu-item" (click)="navigateTo('Productos')"  
          [ngClass]="{ active: isActive('Productos') }">📦 <span>Productos</span></li>
          <li class="menu-item" (click)="navigateTo('Proveedores')">🚚 <span>Proveedores</span></li>
          <li class="menu-item" (click)="navigateTo('Tipos PVP')">💰 <span>Tipos PVP</span></li>
          <li class="menu-item" (click)="navigateTo('Clientes')">👥 <span>Clientes</span></li>
          <li class="menu-item" (click)="navigateTo('Cuentas Contables')">📑 <span>Cuentas Contables</span></li>
          <li class="menu-item" (click)="navigateTo('Empresa')">🏢 <span>Empresa</span></li>
          <li class="menu-item" (click)="navigateTo('Configuración')">🔧 <span>Configuración</span></li>
      </ul>
      <div class="footer">
          <span>© 2024 Punto Pymes CIA</span>
          <button class="toggle-admin-menu" (click)="toggleAdminMenu()">⏪</button>
      </div>
  </aside>

  <!-- Menú Principal (Izquierda) -->
  <aside class="side-menu">
      <ul class="menu">
          <li class="menu-item" (click)="navigateTo('Productos')">📈 <span>Vista General</span></li>
          <li class="menu-item" (click)="navigateTo('Marcas')" 
          [ngClass]="{ active: isActive('Marcas') }">🏷️ <span>Marcas</span></li>
          <li class="menu-item" (click)="navigateTo('Tipos de Productos')">📦 <span>Tipos de Productos</span></li>
          <li class="menu-item" (click)="navigateTo('Tarifas por Grupo')">💲 <span>Tarifas por Grupo</span></li>
      </ul>
  </aside>

  <!-- Contenido Principal -->
  <main class="main-content">
      <!-- Barra de navegación superior ubicación del usuario (breadcrumb) -->
      <div class="breadcrumb-container">
          <a (click)="navigateTo('Productos')" class="breadcrumb-link">Productos</a> /
          <span class="breadcrumb-current">Marcas</span>
      </div>

      <!-- Barra de búsqueda con selector de filtro y botones adicionales -->
      <div class="search-container">
          <input type="text" id="search-input" [(ngModel)]="searchValue" placeholder="Buscar marca">
          <button class="search-btn" (click)="actualizarListaMarcas()">🔎 Buscar</button>
          <button class="btn-new-product" (click)="agregarMarca()">➕ Agregar Marca</button>
      </div>

      <!-- Tabla de Marcas -->
      <table class="product-table" *ngIf="!mostrarFormularioEdicion">
          <thead>
              <tr>
                  <th>Nombre</th>
                  <th>Descripción</th>
                  <th>Acciones</th>
              </tr>
          </thead>
          <tbody>
              <tr *ngFor="let marca of marcasFiltradas">
                  <td>{{ marca.nombre }}</td>
                  <td>{{ marca.descripcion }}</td>
                  <td>
                      <button class="btn-edit" (click)="editarMarca(marca)">✏️</button>
                      <button class="btn-delete" (click)="abrirModalEliminar(marca)">🗑️</button>
                  </td>
              </tr>
          </tbody>
      </table>

      <!-- Paginación -->
      <div class="pagination">
          <button (click)="cambiarPagina(paginaActual - 1)" [disabled]="paginaActual === 1">Previa</button>
          <span>Mostrando del {{ (paginaActual - 1) * itemsPorPagina + 1 }} al {{ Math.min(paginaActual * itemsPorPagina, totalRegistros) }} registros de {{ totalRegistros }}</span>
          <button (click)="cambiarPagina(paginaActual + 1)" [disabled]="paginaActual * itemsPorPagina >= totalRegistros">Siguiente</button>
      </div>

      <!-- Modal para eliminar marca -->
      <div class="modal-overlay" *ngIf="mostrarModalEliminar">
          <div class="modal-eliminar">
              <h2>Eliminar Marca</h2>
              <p>¿Estás seguro de que deseas eliminar esta marca?</p>
              <strong>{{ marcaAEliminar?.nombre }}</strong>
              <p>Esta acción hará que la marca ya no esté disponible ni visible en el sistema.</p>
              <div class="modal-buttons">
                  <button class="btn-cancel" (click)="cerrarModalEliminar()">Cancelar</button>
                  <button class="btn-delete-confirm" (click)="eliminarMarca()">Eliminar Marca</button>
              </div>
          </div>
      </div>

      <!-- Modal para el formulario de edición/creación -->
      <div class="modal-overlay" *ngIf="mostrarFormularioEdicion">
          <div class="modal-formulario">
              <span class="close" (click)="cancelarEdicion()">&times;</span>
              <div class="formulario-edicion">
                  <h2>{{ esEdicion ? 'Editar Marca' : 'Agregar Marca' }}</h2>
                  <form (ngSubmit)="guardarMarca()">
                      <fieldset>
                          <legend>Información Básica</legend>
                          <div class="form-group">
                              <label>Nombre</label>
                              <input type="text" [(ngModel)]="marcaSeleccionada.nombre" name="nombre" required>
                          </div>
                          <div class="form-group">
                              <label>Descripción</label>
                              <input type="text" [(ngModel)]="marcaSeleccionada.descripcion" name="descripcion">
                          </div>
                      </fieldset>
                      <div class="form-actions">
                          <button type="button" class="btn-cancel" (click)="cancelarEdicion()">❌ Cancelar</button>
                          <button type="submit" class="btn-save">{{ esEdicion ? '💾 Guardar Cambios' : '✅ Agregar Marca' }}</button>
                      </div>
                  </form>
              </div>
          </div>
      </div>
  </main>
</div>