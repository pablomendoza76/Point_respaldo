<!-- NavegaciÃ³n superior -->
<nav class="bg-white shadow flex justify-between items-center p-4">
  <div class="flex items-center">
    <img src="/img/icon.png" alt="logo" class="h-8 mr-2" />
    <h1 class="text-xl font-bold text-red-500">Productos</h1>
  </div>
  <h2 class="text-xl font-bold text-red-500">Tipos de Productos</h2>
  <h2 class="text-xl font-bold text-red-500">Supermercado "LABRYC" CIA LTDA</h2>
  <div class="flex items-center space-x-4">
    <span class="text-red-500 cursor-pointer">ğŸ””</span>
    <span id="menu-toggle" class="text-red-500 cursor-pointer">ğŸ”³</span>
    <span class="text-red-500 cursor-pointer">ğŸ </span>
    <span class="text-red-500 cursor-pointer">â„¹ï¸</span>
    <img src="/img/user.png" alt="Usuario" class="h-8 w-8 rounded-full" />
  </div>
</nav>

<!-- Contenedor principal con ambos menÃºs y contenido -->
<div class="billing-admin-container">
  <!-- MenÃº de AdministraciÃ³n (Colapsable) -->
  <aside class="admin-menu" [class.collapsed]="isAdminMenuCollapsed">
    <ul class="menu">
      <li class="menu-item admin" (click)="navigateTo('administracion')">
        âš™ï¸ <span>AdministraciÃ³n</span>
      </li>
      <li
        class="menu-item"
        (click)="navigateTo('Productos')"
        [ngClass]="{ active: isActive('Productos') }"
      >
        ğŸ“¦ <span>Productos</span>
      </li>
      <li class="menu-item" (click)="navigateTo('Proveedores')">
        ğŸšš <span>Proveedores</span>
      </li>
      <li class="menu-item" (click)="navigateTo('Tipos PVP')">
        ğŸ’° <span>Tipos PVP</span>
      </li>
      <li class="menu-item" (click)="navigateTo('Clientes')">
        ğŸ‘¥ <span>Clientes</span>
      </li>
      <li class="menu-item" (click)="navigateTo('Cuentas Contables')">
        ğŸ“‘ <span>Cuentas Contables</span>
      </li>
      <li class="menu-item" (click)="navigateTo('Empresa')">
        ğŸ¢ <span>Empresa</span>
      </li>
      <li class="menu-item" (click)="navigateTo('ConfiguraciÃ³n')">
        ğŸ”§ <span>ConfiguraciÃ³n</span>
      </li>
    </ul>
    <div class="footer">
      <span>Â© 2024 Punto Pymes CIA</span>
      <button class="toggle-admin-menu" (click)="toggleAdminMenu()">âª</button>
    </div>
  </aside>

  <!-- MenÃº Principal (Izquierda) -->
  <aside class="side-menu">
    <ul class="menu">
      <li class="menu-item" (click)="navigateTo('Productos')">
        ğŸ“ˆ <span>Vista General</span>
      </li>
      <li class="menu-item" (click)="navigateTo('Marcas')">
        ğŸ·ï¸ <span>Marcas</span>
      </li>
      <li
        class="menu-item"
        (click)="navigateTo('Tipos de Productos')"
        [ngClass]="{ active: isActive('Tipos de Productos') }">
        ğŸ“¦ <span>Tipos de Productos</span>
      </li>
      <li class="menu-item" (click)="navigateTo('Tarifas por Grupo')">
        ğŸ’² <span>Tarifas por Grupo</span>
      </li>
    </ul>
  </aside>

  <!-- Contenido Principal -->
  <main class="main-content">
    <!-- Barra de navegaciÃ³n superior ubicaciÃ³n del usuario (breadcrumb) -->
    <div class="breadcrumb-container">
      <a (click)="navigateTo('Productos')" class="breadcrumb-link">Productos</a>
      /
      <span class="breadcrumb-current">Tipos de producto</span>
    </div>

    <!-- Barra de bÃºsqueda con selector de filtro y botones adicionales -->
    <div class="search-container">
      <input
        type="search"
        id="search-input"
        [(ngModel)]="searchValue"
        (input)="actualizarListaTiposProductos()"
        placeholder="Buscar tipo de producto..."
      />
      <button class="search-btn" (click)="actualizarListaTiposProductos()">
        ğŸ” Buscar
      </button>
      <button class="btn-new-product" (click)="agregarTipoProducto()">
        â• Agregar Tipo de Producto
      </button>
    </div>

    <!-- Tabla de Tipos de Productos -->
    <table class="product-table" *ngIf="!mostrarFormularioEdicion">
      <thead>
        <tr>
          <th>Nombre</th>
          <th>DescripciÃ³n</th>
          <th>Estado</th>
          <th>CÃ³digo de Sustento</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let tipo of tiposProductosFiltrados">
          <td>{{ tipo.nombre }}</td>
          <td>{{ tipo.descripcion }}</td>
          <td>{{ tipo.estado }}</td>
          <td>{{ tipo.codigoSustento }}</td>
          <td>
            <button class="btn-edit" (click)="editarTipoProducto(tipo)">
              âœï¸
            </button>
            <button class="btn-delete" (click)="abrirModalEliminar(tipo)">
              ğŸ—‘ï¸
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- PaginaciÃ³n -->
    <div class="pagination">
      <button
        (click)="cambiarPagina(paginaActual - 1)"
        [disabled]="paginaActual === 1"
      >
        Previa
      </button>
      <span
        >Mostrando del {{ (paginaActual - 1) * itemsPorPagina + 1 }} al
        {{ Math.min(paginaActual * itemsPorPagina, totalRegistros) }} registros
        de {{ totalRegistros }}</span
      >
      <button
        (click)="cambiarPagina(paginaActual + 1)"
        [disabled]="paginaActual * itemsPorPagina >= totalRegistros"
      >
        Siguiente
      </button>
    </div>

    <!-- Modal para eliminar tipo de producto -->
    <div class="modal-overlay" *ngIf="mostrarModalEliminar">
      <div class="modal-eliminar">
        <h2>Eliminar Tipo de Producto</h2>
        <p>Â¿EstÃ¡s seguro de que deseas eliminar este tipo de producto?</p>
        <strong>{{ tipoProductoAEliminar?.nombre }}</strong>
        <p>
          Esta acciÃ³n harÃ¡ que el tipo de producto ya no estÃ© disponible ni
          visible en el sistema.
        </p>
        <div class="modal-buttons">
          <button class="btn-cancel" (click)="cerrarModalEliminar()">
            Cancelar
          </button>
          <button class="btn-delete-confirm" (click)="eliminarTipoProducto()">
            Eliminar Tipo de Producto
          </button>
        </div>
      </div>
    </div>

    <!-- Modal para el formulario de ediciÃ³n/creaciÃ³n -->
    <div class="modal-overlay" *ngIf="mostrarFormularioEdicion">
      <div class="modal-formulario">
        <span class="close" (click)="cancelarEdicion()">&times;</span>
        <div class="formulario-edicion">
          <h2>
            {{
              esEdicion ? "Editar Tipo de Producto" : "Agregar Tipo de Producto"
            }}
          </h2>
          <form (ngSubmit)="guardarTipoProducto()">
            <fieldset>
              <legend>InformaciÃ³n BÃ¡sica</legend>
              <div class="form-group">
                <label>Nombre</label>
                <input
                  type="text"
                  [(ngModel)]="tipoProductoSeleccionado.nombre"
                  name="nombre"
                  required
                />
              </div>
              <div class="form-group">
                <label>DescripciÃ³n</label>
                <input
                  type="text"
                  [(ngModel)]="tipoProductoSeleccionado.descripcion"
                  name="descripcion"
                />
              </div>
              <div class="form-group">
                <label>CÃ³digo de Sustento</label>
                <input
                  type="text"
                  [(ngModel)]="tipoProductoSeleccionado.codigoSustento"
                  name="codigoSustento"
                />
              </div>
              <div class="form-group">
                <label>Estado</label>
                <select
                  [(ngModel)]="tipoProductoSeleccionado.estado"
                  name="estado"
                >
                  <option value="Activado">Activado</option>
                  <option value="Inactivo">Inactivo</option>
                </select>
              </div>
              <div class="form-group">
                <label>Visible</label>
                <select
                  [(ngModel)]="tipoProductoSeleccionado.visible"
                  name="visible"
                >
                  <option value="Activo">Activo</option>
                  <option value="Inactivo">Inactivo</option>
                </select>
              </div>
            </fieldset>
            <div class="form-actions">
              <button
                type="button"
                class="btn-cancel"
                (click)="cancelarEdicion()"
              >
                âŒ Cancelar
              </button>
              <button type="submit" class="btn-save">
                {{
                  esEdicion
                    ? "ğŸ’¾ Guardar Cambios"
                    : "âœ… Agregar Tipo de Producto"
                }}
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </main>
</div>
